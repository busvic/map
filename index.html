</head>
<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset='utf-8' />
    <script src='https://api.mapbox.com/mapbox-gl-js/v0.48.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.48.0/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" type="text/css" href="styles.css">
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script src="script.js"></script>
    <title>BusVic</title>
    <style>
        /* --- BASEMAP START --- */

        html,
        body,
        #map {
            height: 100%;
            margin: 0px;
        }

        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 0;
            /* height:100%;  */
        }

        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: white;
        }

        .site {
            display: grid;
            grid-template-columns: 20% 80%;
            grid-template-rows: 12% 88%;
            grid-template-areas: "title title""sidebar map""footer footer";
            padding-left: 0;
            width: 100vw;
            height: 100vh;
        }

        .title {
            color: #ccc;
            z-index: 1;
            margin-bottom: 10%;
            font-family: Arial, Helvetica, sans-serif;
            text-align: center;
            color: #f0f0f0;
        }

        /* --- BASEMAP END --- */

        /* --- SIDENAV START --- */
        .sidebar {
            height: 100%;
            width: 20%;
            position: fixed;
            z-index: 1;
            top: 0;
            left: 0;
            background-color: #636363;
            overflow-x: hidden;
            padding-top: 20px;
        }

        .sidebar a {
            padding: 6px 8px 6px 16px;
            text-decoration: none;
            font-size: 25px;
            color: #818181;
            display: block;
        }

        .sidebar a:hover {
            color: #f1f1f1;
        }

        .main {
            margin-left: 160px;
            /* Same as the width of the sidenav */
            font-size: 28px;
            /* Increased text to enable scrolling */
            padding: 0px 10px;
        }

        /* On smaller screens, where height is less than 450px, change the style of the sidenav (less padding and a smaller font size) */

        @media screen and (max-height: 450px) {
            .sidebar {
                padding-top: 15px;
            }

            .sidebar a {
                font-size: 18px;
            }
        }

        /* --- SIDENAV END --- */

        /* --- SIDEBAR START --- */

        @import url(http://fonts.googleapis.com/css?family=Roboto+Condensed:400,300);

        #cssmenu {
            position: relative;
            margin: 0;
            margin-left: 0.5%;
            margin-top: -1%;
            font-family: Arial, Helvetica, sans-serif;
            line-height: 1;
            width: 250px;
            /* color: rgba(183, 214, 255, 0.411) */
        }

        .align-right {
            float: right;
        }

        #cssmenu ul {
            margin: 0;
            padding: 0;
            list-style: none;
            display: block;
        }

        #cssmenu ul li {
            position: relative;
            margin: 0;
            padding: 0;
        }

        #cssmenu ul li a {
            text-decoration: none;
            cursor: pointer;
        }

        #cssmenu>ul>li>a {
            color: #dddddd;
            text-transform: uppercase;
            display: block;
            padding: 20px;
            border-top: 1px solid #636363;
            border-left: 1px solid #636363;
            border-right: 1px solid #636363;
            background: #636363;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
            letter-spacing: 1px;
            font-size: 16px;
            font-weight: 300;
            -webkit-transition: all 0.25s ease-in;
            -moz-transition: all 0.25s ease-in;
            -ms-transition: all 0.25s ease-in;
            -o-transition: all 0.25s ease-in;
            transition: all 0.25s ease-in;
            position: relative;
        }

        #cssmenu>ul>li:first-child>a {
            border-top-left-radius: 3px;
            border-top-right-radius: 3px;
        }

        #cssmenu>ul>li:last-child>a {
            border-bottom-left-radius: 3px;
            border-bottom-right-radius: 3px;
            border-bottom: 1px solid #636363;
        }

        #cssmenu>ul>li:hover>a,
        #cssmenu>ul>li.open>a,
        #cssmenu>ul>li.active>a {
            background: #636363;
            color: #ffffff;
        }

        #cssmenu ul>li.has-sub>a::after {
            content: "";
            position: absolute;
            display: block;
            width: 0;
            height: 0;
            border-top: 13px solid #636363;
            border-bottom: 13px solid transparent;
            border-left: 125px solid transparent;
            border-right: 125px solid transparent;
            left: 0;
            bottom: -13px;
            bottom: 0px;
            z-index: 1;
            opacity: 0;
            -webkit-transition: all .2s ease;
            -moz-transition: all .2s ease;
            -ms-transition: all .2s ease;
            -o-transition: all .2s ease;
            transition: all .2s ease;
        }

        #cssmenu ul>li.has-sub>a::before {
            content: "";
            position: absolute;
            display: block;
            width: 0;
            height: 0;
            border-top: 13px solid #636363;
            border-bottom: 13px solid transparent;
            border-left: 125px solid transparent;
            border-right: 125px solid transparent;
            left: 0;
            bottom: -12px;
            bottom: -1px;
            z-index: 3;
            opacity: 0;
            -webkit-transition: all .2s ease;
            -moz-transition: all .2s ease;
            -ms-transition: all .2s ease;
            -o-transition: all .2s ease;
            transition: all .2s ease;
        }

        #cssmenu ul>li.has-sub::after {
            content: "";
            display: block;
            position: absolute;
            width: 0;
            height: 0;
            border: 7px solid transparent;
            border-top-color: #dddddd;
            z-index: 2;
            right: 20px;
            top: 24.5px;
            pointer-events: none;
        }

        /* Dropdown list icon */
        #cssmenu ul>li:hover::after,
        #cssmenu ul>li.active::after,
        #cssmenu ul>li.open::after {
            border-top-color: #ffffff;
        }

        #cssmenu ul>li.has-sub.open>a::after {
            opacity: 1;
            bottom: -13px;
        }

        #cssmenu ul>li.has-sub.open>a::before {
            opacity: 1;
            bottom: -12px;
        }

        #cssmenu ul ul {
            display: none;
        }

        #cssmenu ul ul li {
            border-left: 1px solid #ccc;
            border-right: 1px solid #ccc;
        }

        /* CSS dropdown list */
        #cssmenu ul ul li a {
            background: #f1f1f1;
            display: block;
            position: relative;
            font-size: 15px;
            padding: 14px 20px;
            border-bottom: 1px solid #dddddd;
            color: #777777;
            font-weight: 300;
            -webkit-transition: all 0.25s ease-in;
            -moz-transition: all 0.25s ease-in;
            -ms-transition: all 0.25s ease-in;
            -o-transition: all 0.25s ease-in;
            transition: all 0.25s ease-in;
        }

        #cssmenu ul ul li:first-child>a {
            padding-top: 18px;
        }

        #cssmenu ul ul ul li {
            border: 0;
        }

        #cssmenu ul ul li:hover>a,
        #cssmenu ul ul li.open>a,
        #cssmenu ul ul li.active>a {
            background: #e4e4e4;
            color: #636363;
        }

        #cssmenu ul ul>li.has-sub>a::after {
            border-top: 13px solid #dddddd;
        }

        #cssmenu ul ul>li.has-sub>a::before {
            border-top: 13px solid #e4e4e4;
        }

        #cssmenu ul ul ul li a {
            padding-left: 30px;
        }

        #cssmenu ul ul>li.has-sub::after {
            top: 18.5px;
            border-width: 6px;
            border-top-color: #636363;
        }

        #cssmenu ul ul>li:hover::after,
        #cssmenu ul ul>li.active::after,
        #cssmenu ul ul>li.open::after {
            border-top-color: #636363;
        }

        /* --- SIDEBAR END --- */
    </style>
</head>

<body>
    <!-- SIDEBAR -->
    <div id="mySidenav" class="sidebar">
        <div class="title" style="FONT-SIZE:15px; LINE-HEIGHT:30px;"><b>BUS SERVICE FREQUENCY</b><br>Eastern
            Metropolitan Region, Victoria</div>

        <!-- DROPDOWN LIST -->
        <div id='cssmenu'>
            <ul>
                <li class='active has'><a id='electorate_id'
                        onclick="clickedElectorate();return false;"><span>ELECTORATES</span></a></li>

                <li class='active has-sub'><a id='weekday_am_id' onclick="clickedAM();return false;"><span>WEEKDAY AM
                            PEAK </span></a>
                    <ul>
                        <li class='weekday_am_id'><a>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#ffffb2; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;10-20 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WDAM'
                                        id="tenWDAM" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#fed976; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;20-30 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WDAM'
                                        id="twentyWDAM" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#feb24c; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;30-40 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WDAM'
                                        id="thirtyWDAM" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#fd8d3c; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;40-50 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WDAM'
                                        id="fortyWDAM" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#f03b20; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;50-60 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WDAM'
                                        id="fiftyWDAM" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#bd0026; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;60 mins & more &emsp; <input type="checkbox" class='WDAM'
                                        id="sixtyWDAM" /></span>
                            </a>
                        </li>
                    </ul>
                </li>

                <li class='active has-sub'><a id='weekday_daily_id' onclick="clickedAvg();return false;"><span>WEEKDAY
                            DAILY PEAK</span></a>
                    <ul>
                        <li class='weekday_daily_id'><a><span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#ffffb2; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;10-20 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WDD'
                                        id="tenWDD" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#fed976; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;20-30 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WDD'
                                        id="twentyWDD" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#feb24c; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;30-40 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WDD'
                                        id="thirtyWDD" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#fd8d3c; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;40-50 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WDD'
                                        id="fortyWDD" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#f03b20; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;50-60 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WDD'
                                        id="fiftyWDD" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#bd0026; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;60 mins & more &emsp; <input type="checkbox" class='WDD'
                                        id="sixtyWDD" /></span></a> </li>
                    </ul>
                </li>

                <li class='active has-sub'><a id='weekend_sat_id' onclick="clickedSat();return false;"><span>WEEKEND
                            SATURDAY</span></a>
                    <ul>
                        <li class='weekend_sat_id'><a><span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#ffffb2; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;10-20 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WESat'
                                        id="tenWESat" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#fed976; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;20-30 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WESat'
                                        id="twentyWESat" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#feb24c; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;30-40 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WESat'
                                        id="thirtyWESat" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#fd8d3c; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;40-50 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WESat'
                                        id="fortyWESat" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#f03b20; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;50-60 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WESat'
                                        id="fiftyWESat" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#bd0026; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;60 mins & more &emsp; <input type="checkbox" class='WESat'
                                        id="sixtyWESat" /></span></a>
                        </li>
                    </ul>
                </li>

                <li class='active has-sub'><a id='weekend_sun_id' onclick="clickedSun();return false;"><span>WEEKEND
                            SUNDAY</span></a>
                    <ul>
                        <li class='weekend_sun_id'><a><span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#ffffb2; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;10-20 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WESun'
                                        id="tenWESun" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#fed976; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;20-30 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WESun'
                                        id="twentyWESun" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#feb24c; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;30-40 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WESun'
                                        id="thirtyWESun" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#fd8d3c; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;40-50 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WESun'
                                        id="fortyWESun" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#f03b20; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;50-60 mins &emsp;&emsp;&emsp; <input type="checkbox" class='WESun'
                                        id="fiftyWESun" /></span><br>
                                <span>
                                    <svg width="10" height="10">
                                        <rect width="10" height="10" style="fill:#bd0026; stroke-width:1;stroke:#000" />
                                    </svg>
                                    &emsp;60 mins & more &emsp; <input type="checkbox" class='WESun'
                                        id="sixtyWESun" /></span></a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>

    <!-- MAP -->
    <div id="main">
        <div id='map'></div>
    </div>

    <script type="text/javascript">
        (function ($) {
            $(document).ready(function () {
                $('#cssmenu li.has-sub>a').on('click', function () {
                    $(this).removeAttr('href');
                    var element = $(this).parent('li');
                    if (element.hasClass('open')) {
                        element.removeClass('open');
                        element.find('li').removeClass('open');
                        element.find('ul').slideUp();
                    }
                    else {
                        element.addClass('open');
                        element.children('ul').slideDown();
                        element.siblings('li').children('ul').slideUp();
                        element.siblings('li').removeClass('open');
                        element.siblings('li').find('li').removeClass('open');
                        element.siblings('li').find('ul').slideUp();
                    }
                });
            });
        })(jQuery);

        mapboxgl.accessToken = 'pk.eyJ1IjoiYnVzdmljIiwiYSI6ImNrNDVhZThzazA2OXczZXFqbXg5ajJlcHIifQ.gEhnz3_adcuoqda-Ca_HDg';
        var bounds = [[143.7113, -38.3994], [146.2702, -37.1837]];  //melbourne

        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/busvic/ck4h3fi3h39xz1cmdkt1zest8', //regular
            center: [145.111, -37.795],
            zoom: 10.2,
            maxBounds: bounds
        });

        var hoveredStateId = null;
        var nav = new mapboxgl.NavigationControl();
        map.addControl(nav, 'bottom-right');

        map.on('load', function () {

            map.addLayer({
                "id": "victoria",
                "type": "fill",
                "source": {
                    "type": "vector",
                    "url": "mapbox://busvic.cqmnk1ev"
                },
                "source-layer": "Victoria-3hacsa",
                "paint": {
                    "fill-color": "rgba(99,99,99,0.50)"
                }
            });

            map.addSource('regions', {
                "type": "vector",
                "url": "mapbox://busvic.3f4l5ggp"
            });

            // 1. Show electorate border and region
            map.addLayer({
                "id": "Regions-borders",
                "type": "line",
                "source": "regions",
                "source-layer": "EasternRegions-45gqnk",
                "paint": {
                    "line-color": "#636363",
                    "line-width": 0.5
                }
            });

            // 1. Show electorate border and region
            map.addLayer({
                "id": "Regions",
                "type": "fill",
                "source": "regions",
                "source-layer": "EasternRegions-45gqnk",
                "paint": {
                    "fill-color": "rgba(99,99,99,0.05)"
                },
            }); // Regular 

            // 4 highlight the clicked part with darker colour [100% transperancy of selected layer ]
            map.addLayer({
                "id": "Regions-highlighted",
                "type": "fill",
                "source": "regions",
                "source-layer": "EasternRegions-45gqnk",
                "paint": {
                    "fill-outline-color": "#484896",
                    "fill-color": "rgba(183, 214, 255, 0.411)",
                    "fill-opacity": 0.75
                },
                "filter": ["in", "DISTRICT", ""]
            }); // Regular: Place polygon under these labels.

            map.addSource('roads', {
                "type": "vector",
                "url": "mapbox://busvic.bf5x85fy"
            });

            // 5 Line label
            map.addLayer({
                'id': 'lineLabel',
                'type': 'symbol',
                "source": "roads",
                "source-layer": "ServiceFreq-afxj23",
                "minzoom": 10,
                "maxzoom": 17.5,
                'layout': {
                    'text-field': '{Line}',
                    'symbol-placement': 'line',
                    'text-size': 11.2,
                    "text-offset": [0, 1],
                    // 'text-offset': -1,
                    "visibility": 'none',
                },
                "paint": {
                    "icon-color": "#000000",
                    "icon-halo-color": "#fff",
                    "icon-halo-width": 2
                }
            });

            // Layer WEEKDAY AM Peak Frequency CHECKBOXEX
            map.addLayer({
                "id": "am_peak_10", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#ffffb2',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['>=', 'AMPeakID', 96],
                'maxzoom': 17.2,
            }, 'victoria');

            map.addLayer({
                "id": "am_peak_20", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#fed976',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['==', 'AMPeakID', 58],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "am_peak_30", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#feb24c',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['==', 'AMPeakID', 41],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "am_peak_40", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#fd8d3c',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['==', 'AMPeakID', 32],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "am_peak_50", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#f03b20',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': [
                    "all",
                    ['<=', 'AMPeakID', 26],
                    ['>=', 'AMPeakID', 24],
                ],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "am_peak_60", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#bd0026'
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['<', 'AMPeakID', 24],
                'maxzoom': 17.2,
            }, 'victoria');

            // Layer WEEKDAY DAILY Peak Frequency CHECKBOXEX
            map.addLayer({
                "id": "avg_daily_10", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#ffffb2',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['>=', 'DailyID', 96],
                'maxzoom': 19,
            }, 'victoria');

            map.addLayer({
                "id": "avg_daily_20", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#fed976',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['==', 'DailyID', 58],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "avg_daily_30", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#feb24c',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['==', 'DailyID', 41],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "avg_daily_40", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#fd8d3c',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['==', 'DailyID', 32],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "avg_daily_50", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#f03b20',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': [
                    "all",
                    ['<=', 'DailyID', 26],
                    ['>=', 'DailyID', 24],
                ],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "avg_daily_60", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#bd0026'
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['<', 'DailyID', 24],
                'maxzoom': 17.2,
            }, 'victoria');

            // Layer WEEKEND sat Frequency CHECKBOXEX
            map.addLayer({
                "id": "sat_10", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#ffffb2',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['>=', 'SatDailyID', 96],
                'maxzoom': 17.2,
            }, 'victoria');

            map.addLayer({
                "id": "sat_20", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#fed976',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['==', 'SatDailyID', 58],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "sat_30", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#feb24c',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['==', 'SatDailyID', 41],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "sat_40", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#fd8d3c',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['==', 'SatDailyID', 32],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "sat_50", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#f03b20',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': [
                    "all",
                    ['<=', 'SatDailyID', 26],
                    ['>=', 'SatDailyID', 24],
                ],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "sat_60", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#bd0026'
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['<', 'SatDailyID', 24],
                'maxzoom': 17.2,
            }, 'victoria');

            // Layer WEEKEND SUNDAY Frequency CHECKBOXEX
            map.addLayer({
                "id": "sun_10", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#ffffb2',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['>=', 'SunDailyID', 96],
                'maxzoom': 19,
            }, 'victoria');

            map.addLayer({
                "id": "sun_20", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#fed976',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['==', 'SunDailyID', 58],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "sun_30", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#feb24c',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['==', 'SunDailyID', 41],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "sun_40", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#fd8d3c',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['==', 'SunDailyID', 32],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "sun_50", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#f03b20',
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': [
                    "all",
                    ['<=', 'SunDailyID', 26],
                    ['>=', 'SunDailyID', 24],
                ],
                'maxzoom': 17.2,
            }, 'victoria');
            map.addLayer({
                "id": "sun_60", "type": "line", "source": "roads", "source-layer": "ServiceFreq-afxj23",
                'paint': {
                    'line-width': 2.5,
                    'line-color': '#bd0026'
                },
                'layout': {
                    'visibility': 'none'
                },
                'filter': ['<', 'SunDailyID', 24],
                'maxzoom': 17.2,
            }, 'victoria');

            // Closed map.on
        });

        function clickedElectorate() {
            map.setLayoutProperty('lineLabel', 'visibility', 'none');
            var visibility = map.getLayoutProperty('Regions', 'visibility');
            if (visibility == 'visible') {
                map.setLayoutProperty('Regions', 'visibility', 'none');
            } else {
                map.setLayoutProperty('Regions', 'visibility', 'visible');
            }
        }

        function clickedAM() {
            // Layer WEEKDAY AM Peak Frequency CHECKBOXEX 
            // Starting with the darker color
            map.setLayoutProperty('lineLabel', 'visibility', 'visible');

            document.getElementById("tenWDAM").checked = true;
            document.getElementById("twentyWDAM").checked = true;
            document.getElementById("thirtyWDAM").checked = true;
            document.getElementById("fortyWDAM").checked = true;
            document.getElementById("fiftyWDAM").checked = true;
            document.getElementById("sixtyWDAM").checked = true;
            map.setLayoutProperty('am_peak_10', 'visibility', 'visible');
            map.setLayoutProperty('am_peak_20', 'visibility', 'visible');
            map.setLayoutProperty('am_peak_30', 'visibility', 'visible');
            map.setLayoutProperty('am_peak_40', 'visibility', 'visible');
            map.setLayoutProperty('am_peak_50', 'visibility', 'visible');
            map.setLayoutProperty('am_peak_60', 'visibility', 'visible');

            document.getElementById("tenWDD").checked = false;
            document.getElementById("twentyWDD").checked = false;
            document.getElementById("thirtyWDD").checked = false;
            document.getElementById("fortyWDD").checked = false;
            document.getElementById("fiftyWDD").checked = false;
            document.getElementById("sixtyWDD").checked = false;
            map.setLayoutProperty('avg_daily_10', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_20', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_30', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_40', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_50', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_60', 'visibility', 'none');

            document.getElementById("tenWESat").checked = false;
            document.getElementById("twentyWESat").checked = false;
            document.getElementById("thirtyWESat").checked = false;
            document.getElementById("fortyWESat").checked = false;
            document.getElementById("fiftyWESat").checked = false;
            document.getElementById("sixtyWESat").checked = false;
            map.setLayoutProperty('sat_10', 'visibility', 'none');
            map.setLayoutProperty('sat_20', 'visibility', 'none');
            map.setLayoutProperty('sat_30', 'visibility', 'none');
            map.setLayoutProperty('sat_40', 'visibility', 'none');
            map.setLayoutProperty('sat_50', 'visibility', 'none');
            map.setLayoutProperty('sat_60', 'visibility', 'none');

            document.getElementById("tenWESun").checked = false;
            document.getElementById("twentyWESun").checked = false;
            document.getElementById("thirtyWESun").checked = false;
            document.getElementById("fortyWESun").checked = false;
            document.getElementById("fiftyWESun").checked = false;
            document.getElementById("sixtyWESun").checked = false;
            map.setLayoutProperty('sun_10', 'visibility', 'none');
            map.setLayoutProperty('sun_20', 'visibility', 'none');
            map.setLayoutProperty('sun_30', 'visibility', 'none');
            map.setLayoutProperty('sun_40', 'visibility', 'none');
            map.setLayoutProperty('sun_50', 'visibility', 'none');
            map.setLayoutProperty('sun_60', 'visibility', 'none');

            document.getElementById('tenWDAM').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('am_peak_10', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('am_peak_10', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('am_peak_10', 'visibility', 'visible');
                }
            });
            document.getElementById('twentyWDAM').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('am_peak_20', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('am_peak_20', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('am_peak_20', 'visibility', 'visible');
                }
            });
            document.getElementById('thirtyWDAM').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('am_peak_30', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('am_peak_30', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('am_peak_30', 'visibility', 'visible');
                }
            });
            document.getElementById('fortyWDAM').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('am_peak_40', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('am_peak_40', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('am_peak_40', 'visibility', 'visible');
                }
            });
            document.getElementById('fiftyWDAM').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('am_peak_50', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('am_peak_50', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('am_peak_50', 'visibility', 'visible');
                }
            });
            document.getElementById('sixtyWDAM').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('am_peak_60', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('am_peak_60', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('am_peak_60', 'visibility', 'visible');
                }
            });

        }

        function clickedAvg() {
            // Layer WEEKDAY DAILY Peak Frequency CHECKBOXEX 
            // Starting with the darker color
            map.setLayoutProperty('lineLabel', 'visibility', 'visible');


            document.getElementById("tenWDD").checked = true;
            document.getElementById("twentyWDD").checked = true;
            document.getElementById("thirtyWDD").checked = true;
            document.getElementById("fortyWDD").checked = true;
            document.getElementById("fiftyWDD").checked = true;
            document.getElementById("sixtyWDD").checked = true;
            map.setLayoutProperty('avg_daily_10', 'visibility', 'visible');
            map.setLayoutProperty('avg_daily_20', 'visibility', 'visible');
            map.setLayoutProperty('avg_daily_30', 'visibility', 'visible');
            map.setLayoutProperty('avg_daily_40', 'visibility', 'visible');
            map.setLayoutProperty('avg_daily_50', 'visibility', 'visible');
            map.setLayoutProperty('avg_daily_60', 'visibility', 'visible');


            document.getElementById("tenWDAM").checked = false;
            document.getElementById("twentyWDAM").checked = false;
            document.getElementById("thirtyWDAM").checked = false;
            document.getElementById("fortyWDAM").checked = false;
            document.getElementById("fiftyWDAM").checked = false;
            document.getElementById("sixtyWDAM").checked = false;
            map.setLayoutProperty('am_peak_10', 'visibility', 'none');
            map.setLayoutProperty('am_peak_20', 'visibility', 'none');
            map.setLayoutProperty('am_peak_30', 'visibility', 'none');
            map.setLayoutProperty('am_peak_40', 'visibility', 'none');
            map.setLayoutProperty('am_peak_50', 'visibility', 'none');
            map.setLayoutProperty('am_peak_60', 'visibility', 'none');

            document.getElementById("tenWESat").checked = false;
            document.getElementById("twentyWESat").checked = false;
            document.getElementById("thirtyWESat").checked = false;
            document.getElementById("fortyWESat").checked = false;
            document.getElementById("fiftyWESat").checked = false;
            document.getElementById("sixtyWESat").checked = false;
            map.setLayoutProperty('sat_10', 'visibility', 'none');
            map.setLayoutProperty('sat_20', 'visibility', 'none');
            map.setLayoutProperty('sat_30', 'visibility', 'none');
            map.setLayoutProperty('sat_40', 'visibility', 'none');
            map.setLayoutProperty('sat_50', 'visibility', 'none');
            map.setLayoutProperty('sat_60', 'visibility', 'none');

            document.getElementById("tenWESun").checked = false;
            document.getElementById("twentyWESun").checked = false;
            document.getElementById("thirtyWESun").checked = false;
            document.getElementById("fortyWESun").checked = false;
            document.getElementById("fiftyWESun").checked = false;
            document.getElementById("sixtyWESun").checked = false;
            map.setLayoutProperty('sun_10', 'visibility', 'none');
            map.setLayoutProperty('sun_20', 'visibility', 'none');
            map.setLayoutProperty('sun_30', 'visibility', 'none');
            map.setLayoutProperty('sun_40', 'visibility', 'none');
            map.setLayoutProperty('sun_50', 'visibility', 'none');
            map.setLayoutProperty('sun_60', 'visibility', 'none');

            document.getElementById('tenWDD').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('avg_daily_10', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('avg_daily_10', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('avg_daily_10', 'visibility', 'visible');
                }
            });
            document.getElementById('twentyWDD').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('avg_daily_20', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('avg_daily_20', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('avg_daily_20', 'visibility', 'visible');
                }
            });
            document.getElementById('thirtyWDD').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('avg_daily_30', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('avg_daily_30', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('avg_daily_30', 'visibility', 'visible');
                }
            });
            document.getElementById('fortyWDD').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('avg_daily_40', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('avg_daily_40', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('avg_daily_40', 'visibility', 'visible');
                }
            });
            document.getElementById('fiftyWDD').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('avg_daily_50', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('avg_daily_50', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('avg_daily_50', 'visibility', 'visible');
                }
            });
            document.getElementById('sixtyWDD').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('avg_daily_60', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('avg_daily_60', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('avg_daily_60', 'visibility', 'visible');
                }
            });
        }

        function clickedSat() {
            // Layer WEEKEND satDAY Frequency CHECKBOXEX 
            // Starting with the darker color
            map.setLayoutProperty('lineLabel', 'visibility', 'visible');

            document.getElementById("tenWESat").checked = true;
            document.getElementById("twentyWESat").checked = true;
            document.getElementById("thirtyWESat").checked = true;
            document.getElementById("fortyWESat").checked = true;
            document.getElementById("fiftyWESat").checked = true;
            document.getElementById("sixtyWESat").checked = true;
            map.setLayoutProperty('sat_10', 'visibility', 'visible');
            map.setLayoutProperty('sat_20', 'visibility', 'visible');
            map.setLayoutProperty('sat_30', 'visibility', 'visible');
            map.setLayoutProperty('sat_40', 'visibility', 'visible');
            map.setLayoutProperty('sat_50', 'visibility', 'visible');
            map.setLayoutProperty('sat_60', 'visibility', 'visible');

            document.getElementById("tenWDAM").checked = false;
            document.getElementById("twentyWDAM").checked = false;
            document.getElementById("thirtyWDAM").checked = false;
            document.getElementById("fortyWDAM").checked = false;
            document.getElementById("fiftyWDAM").checked = false;
            document.getElementById("sixtyWDAM").checked = false;
            map.setLayoutProperty('am_peak_10', 'visibility', 'none');
            map.setLayoutProperty('am_peak_20', 'visibility', 'none');
            map.setLayoutProperty('am_peak_30', 'visibility', 'none');
            map.setLayoutProperty('am_peak_40', 'visibility', 'none');
            map.setLayoutProperty('am_peak_50', 'visibility', 'none');
            map.setLayoutProperty('am_peak_60', 'visibility', 'none');

            document.getElementById("tenWDD").checked = false;
            document.getElementById("twentyWDD").checked = false;
            document.getElementById("thirtyWDD").checked = false;
            document.getElementById("fortyWDD").checked = false;
            document.getElementById("fiftyWDD").checked = false;
            document.getElementById("sixtyWDD").checked = false;
            map.setLayoutProperty('avg_daily_10', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_20', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_30', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_40', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_50', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_60', 'visibility', 'none');

            document.getElementById("tenWESun").checked = false;
            document.getElementById("twentyWESun").checked = false;
            document.getElementById("thirtyWESun").checked = false;
            document.getElementById("fortyWESun").checked = false;
            document.getElementById("fiftyWESun").checked = false;
            document.getElementById("sixtyWESun").checked = false;
            map.setLayoutProperty('sun_10', 'visibility', 'none');
            map.setLayoutProperty('sun_20', 'visibility', 'none');
            map.setLayoutProperty('sun_30', 'visibility', 'none');
            map.setLayoutProperty('sun_40', 'visibility', 'none');
            map.setLayoutProperty('sun_50', 'visibility', 'none');
            map.setLayoutProperty('sun_60', 'visibility', 'none');

            document.getElementById('tenWESat').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('sat_10', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('sat_10', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('sat_10', 'visibility', 'visible');
                }
            });
            document.getElementById('twentyWESat').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('sat_20', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('sat_20', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('sat_20', 'visibility', 'visible');
                }
            });
            document.getElementById('thirtyWESat').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('sat_30', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('sat_30', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('sat_30', 'visibility', 'visible');
                }
            });
            document.getElementById('fortyWESat').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('sat_40', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('sat_40', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('sat_40', 'visibility', 'visible');
                }
            });
            document.getElementById('fiftyWESat').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('sat_50', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('sat_50', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('sat_50', 'visibility', 'visible');
                }
            });
            document.getElementById('sixtyWESat').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('sat_60', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('sat_60', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('sat_60', 'visibility', 'visible');
                }
            });
        }

        function clickedSun() {
            // Layer WEEKEND SUNDAY Frequency CHECKBOXEX 
            // Starting with the darker color
            map.setLayoutProperty('lineLabel', 'visibility', 'visible');

            document.getElementById("tenWESun").checked = true;
            document.getElementById("twentyWESun").checked = true;
            document.getElementById("thirtyWESun").checked = true;
            document.getElementById("fortyWESun").checked = true;
            document.getElementById("fiftyWESun").checked = true;
            document.getElementById("sixtyWESun").checked = true;
            map.setLayoutProperty('sun_10', 'visibility', 'visible');
            map.setLayoutProperty('sun_20', 'visibility', 'visible');
            map.setLayoutProperty('sun_30', 'visibility', 'visible');
            map.setLayoutProperty('sun_40', 'visibility', 'visible');
            map.setLayoutProperty('sun_50', 'visibility', 'visible');
            map.setLayoutProperty('sun_60', 'visibility', 'visible');

            document.getElementById("tenWDAM").checked = false;
            document.getElementById("twentyWDAM").checked = false;
            document.getElementById("thirtyWDAM").checked = false;
            document.getElementById("fortyWDAM").checked = false;
            document.getElementById("fiftyWDAM").checked = false;
            document.getElementById("sixtyWDAM").checked = false;
            map.setLayoutProperty('am_peak_10', 'visibility', 'none');
            map.setLayoutProperty('am_peak_20', 'visibility', 'none');
            map.setLayoutProperty('am_peak_30', 'visibility', 'none');
            map.setLayoutProperty('am_peak_40', 'visibility', 'none');
            map.setLayoutProperty('am_peak_50', 'visibility', 'none');
            map.setLayoutProperty('am_peak_60', 'visibility', 'none');

            document.getElementById("tenWDD").checked = false;
            document.getElementById("twentyWDD").checked = false;
            document.getElementById("thirtyWDD").checked = false;
            document.getElementById("fortyWDD").checked = false;
            document.getElementById("fiftyWDD").checked = false;
            document.getElementById("sixtyWDD").checked = false;
            map.setLayoutProperty('avg_daily_10', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_20', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_30', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_40', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_50', 'visibility', 'none');
            map.setLayoutProperty('avg_daily_60', 'visibility', 'none');

            document.getElementById("tenWESat").checked = false;
            document.getElementById("twentyWESat").checked = false;
            document.getElementById("thirtyWESat").checked = false;
            document.getElementById("fortyWESat").checked = false;
            document.getElementById("fiftyWESat").checked = false;
            document.getElementById("sixtyWESat").checked = false;
            map.setLayoutProperty('sat_10', 'visibility', 'none');
            map.setLayoutProperty('sat_20', 'visibility', 'none');
            map.setLayoutProperty('sat_30', 'visibility', 'none');
            map.setLayoutProperty('sat_40', 'visibility', 'none');
            map.setLayoutProperty('sat_50', 'visibility', 'none');
            map.setLayoutProperty('sat_60', 'visibility', 'none');

            document.getElementById('tenWESun').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('sun_10', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('sun_10', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('sun_10', 'visibility', 'visible');
                }
            });
            document.getElementById('twentyWESun').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('sun_20', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('sun_20', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('sun_20', 'visibility', 'visible');
                }
            });
            document.getElementById('thirtyWESun').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('sun_30', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('sun_30', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('sun_30', 'visibility', 'visible');
                }
            });
            document.getElementById('fortyWESun').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('sun_40', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('sun_40', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('sun_40', 'visibility', 'visible');
                }
            });
            document.getElementById('fiftyWESun').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('sun_50', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('sun_50', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('sun_50', 'visibility', 'visible');
                }
            });
            document.getElementById('sixtyWESun').addEventListener('click', function () {
                var visibility = map.getLayoutProperty('sun_60', 'visibility');
                if (visibility == 'visible') {
                    map.setLayoutProperty('sun_60', 'visibility', 'none');
                } else {
                    map.setLayoutProperty('sun_60', 'visibility', 'visible');
                }
            });
        }

        // 4 highlight the clicked part with darker colour [100% transperancy of selected layer ]
        map.on('click', function (e) {
            // set bbox as 5px reactangle area around clicked point
            var bbox = [
                [e.point.x - 5, e.point.y - 5],
                [e.point.x + 5, e.point.y + 5]
            ];
            // var start = [e.point.x, e.point.y];
            // var end = [e.point.x, e.point.y];


            var features = map.queryRenderedFeatures(bbox, {
                layers: ['Regions']
            });
            // Run through the selected features and set a filter to match features with unique FIPS codes to activate
            // the `counties-highlighted` layer.
            var filter = features.reduce(function (memo, feature) {
                memo.push(feature.properties.DISTRICT);
                return memo;
            }, ['in', 'DISTRICT']);
            map.setFilter("Regions-highlighted", filter);

            // map.fitBounds(bbox);

            // alert(bbox);
        });

        // --- 9. Pop-Up when hover ---- // 
        // Pop-up District name when hover over
        map.on('click', 'Regions', function (e) {
            new mapboxgl.Popup()
                .setLngLat(e.lngLat)
                .setHTML(e.features[0].properties.DISTRICT)
                .addTo(map);
        });

        // // Pop-up Weekday frequency
        map.on('click', 'lineLabel', function (e) {
            new mapboxgl.Popup()
                .setLngLat(e.lngLat)
                .setHTML('<b>Line Number: </b>' + e.features[0].properties.Line + '<br>' + 
                        '<b>On Weekdays</b><br>' +
                        '<i>First Service: </i>' + e.features[0].properties.First + '<br>' + 
                        '<i>Last Service: </i>' +  e.features[0].properties.Last + '<br>' + 
                        '<b>On Saturday</b><br>' +
                        '<i>First Service: </i>' +  e.features[0].properties.Sat_First + '<br>' +
                        '<i>Last Service: </i>' +  e.features[0].properties.Sat_Last + '<br>' + 
                        '<b>On Sundays</b><br>' +
                        '<i>First Service: </i>' +  e.features[0].properties.Sun_First + '<br>' +
                        '<i>Last Service: </i>' +  e.features[0].properties.Sun_Last)
                .addTo(map);
        });

        // Change mouse curson when hover on regions
        map.on('mousemove', 'Regions', function (e) {
            map.getCanvas().style.cursor = 'pointer';
        });
        map.on('mouseleave', 'Regions', function () {
            map.getCanvas().style.cursor = '';
        });

        // Change mouse curson when hover on weekend routes
        map.on('mousemove', 'lineLabel', function (e) {
            map.getCanvas().style.cursor = 'pointer';
        });
        map.on('mouseleave', 'lineLabel', function () {
            map.getCanvas().style.cursor = '';
        });

    </script>

</body>

</html>
